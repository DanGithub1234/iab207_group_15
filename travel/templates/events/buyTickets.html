{% extends 'base.html' %}

{% from 'bootstrap5/form.html' import render_form %}

{% block content %}
    
    <!-- event details -->

    <div class="p-5 row">

        <div class="col-md-7 p-5">
            <div class="home-content">
        
                <p class="h1">{{event.name}}</p>
                <p class="card-text mb-1" style="color: black;">{{event.description}}</p>
                <p class="card-text mb-1" style="color: black;"><strong>Genre:</strong> {{event.genre}}</p>
                <p class="card-text mb-1" style="color: black;"><strong>Location:</strong> {{event.location}}</p>
                <p class="card-text mb-1" style="color: black;"><strong>Date:</strong> {{event.event_date}}</p>
                <p class="card-text mb-1" style="color: black;"><strong>Time:</strong> Start: {{event.start_time}}, End: {{event.end_time}}</p>
            </div>

        </div>
    </div>

    <div class="card custom-card-ticket">
  <div class="card-header custom-card-ticket-header"><strong>Complete your purchase</strong></div>
  <div class="card-body custom-card-body">

<!-- ticket purchase form -->
<form method="POST" action="#" onsubmit="showThankYouModal(event)">

  <!--ticket types -->
  <h4 class="mb-3">Ticket Details</h4>
  <div class="row g-3">
    <div class="col-md-6">
      <label for="ticket_type" class="form-label">Ticket Price: ${{event.ticket_price}}</label>
      <!-- <select id="ticket_type" name="ticket_type" class="form-control" required>
        <option value="adult">Adult</option>
        <option value="student">Student</option>
        <option value="vip">VIP</option>
      </select> -->
    </div>
    <div class="col-md-6">
      <label for="quantity" class="form-label">Number of Tickets</label>
      <input type="number" id="quantity" name="quantity" class="form-control" min="1" max="12" value="1" required>
    </div>
  </div>

  <!-- simple price note -->
  <!-- <div class="mt-2">
    <small class="text-muted">Ticket Price: ${{event.ticket_price}}</small>
  </div> -->

  <hr class="my-4">

  <!-- buyer information -->
  <h4 class="mb-3">Buyer Information</h4>
  <div class="row g-3">
    <div class="col-md-6">
      <label for="full_name" class="form-label">Full Name</label>
      <input type="text" id="full_name" name="full_name" class="form-control" required>
    </div>
    <div class="col-md-6">
      <label for="email" class="form-label">Email</label>
      <input type="email" id="email" name="email" class="form-control" required placeholder="e.g. johnsmith@gmail.com">
    </div>
    <div class="col-md-6">
      <label for="phone" class="form-label">Phone </label>
      <input type="tel" id="phone" name="buyer_phone" class="form-control" required placeholder="e.g. 0412 345 678">
    </div>
  </div>

  <hr class="my-4">

  <!-- billing information -->
  <h4 class="mb-3">Billing Information</h4>
  <input type="text" id="billing_address" name="billing_address" class="form-control" placeholder="Billing address (optional)">

  <hr class="my-4">

  <!-- final confirmation -->
  <h4 class="mb-3">Final Confirmation</h4>
  <p class="mb-2" style="color:black;">
    <strong>Total:</strong> price(ticket type) + $5 fee per ticket × quantity
  </p>

  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="agree" name="agree" required>
    <label class="form-check-label" for="agree">I agree to Terms &amp; Conditions / Refund Policy</label>
  </div>

  <div class="d-flex justify-content-center mt-3">
    <button type="submit" class="custom-button-categories-small">Confirm &amp; Pay</button>
  </div>
</form>
  </div>
</div>

<!-- Confirmation Modal -->
<div class="modal fade" id="thankYouModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content custom-card-ticket">
      <div class="modal-header custom-card-ticket-header">
        <h5 class="modal-title">Thank you!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body custom-card-body text-center">
        <p>Your ticket has been successfully purchased.</p>
        <p>Thanks for using <strong>musicCloud</strong>!</p>
      </div>
      <div class="modal-footer">
        <a href="{{ url_for('event.categorise') }}" class="custom-button-categories-small">Back to Events</a>
      </div>
    </div>
  </div>
</div>

{% if show_modal %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var modal = new bootstrap.Modal(document.getElementById('thankYouModal'));
    modal.show();
  });
</script>
{% endif %}

    <!-- footer -->

    <footer class="text-center mt-5">
        <div class="text-center p-5 mb-2 custom-footer text-secondary-emphasis opacity-70" style="width: 100%;">

            <div class="d-flex flex-column flex-sm-row justify-content-center align-items-center">

                <h5 class="mx-4">Home</h5>
                <h5 class="mx-4">Features</h5>
                <h5 class="mx-4">News</h5>
                <h5 class="mx-4">About Us</h5>

            </div>


            <hr class="solid" style="color: rgb(203, 203, 203);">



            <div class="d-flex justify-content-center">
                <p> <i class="bi bi-cloudy-fill"></i> © 2025 musicCloud, Inc</p>



            </div>



        </div>
    </footer>
</body>

</html>
{% endblock %}
